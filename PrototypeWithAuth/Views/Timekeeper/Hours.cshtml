@model List<EmployeeHours>
@using Microsoft.AspNetCore.Identity
@using PrototypeWithAuth.Data
@inject UserManager<ApplicationUser> UserManager

@{
    ViewData["Title"] = "Hours";
    Layout = "~/Views/Shared/TimeKeeperView.cshtml";
}
<div class="ml-6 mt-4">

    <div class="row mb-6">
        <div class="col-6"><h3><strong>Monthly Summary</strong></h3></div>
        <div class="col-6">

        </div>
    </div>
    <div class="row">
        <div class="col-7">
            <div class="row mt-6 p-3 text-center">
                <div class="col-4">
                    Date
                </div>
                <div class="col-2">
                    Entry Time
                </div>
                <div class="col-2">
                    Exit Time
                </div>
                <div class="col-2">
                    Total
                </div>
            </div>
            @foreach (var eh in Model)
            {
                <div class="row border p-3 text-center">

                    <div class="col-4">
                        @eh.Date.ToLongDateString()
                    </div>
                    <div class="col-3">
                        @eh.Entry1.ToShortTimeString()
                        <br/>
                        @eh.Entry2?.ToShortTimeString()
                    </div>
                    <div class="col-3">
                        @eh.Exit1?.ToShortTimeString()
                        <br/>
                        @eh.Exit2?.ToShortTimeString()
                    </div>
                    <div class="col-2">
                        @{
                            var hours = (eh.Exit1 - eh.Entry1)?.ToString(@"hh\:mm")??"";
                        }
                        @hours
                    </div>

                </div>
              
            }
            <div class="row mt-6 py-4 pl-3 text-center">
                <div class="col-2">
                    Work Days
                </div>
                <div class="col-2">
                    Sick Days
                </div>
                <div class="col-2">
                    Vacation Days
                </div>
                <div class="col-5  text-right pr-5">
                    Total Hours
                </div>
            </div>
            <div class="row mt-2 p-4  border  text-center" style="border-color: var(--timekeeper-color) !important;">
                <div class="col-2">
                    @Model.Where(eh => eh.OffDayTypeID == null).Count()
                </div>
                <div class="col-2">
                    @Model.Where(eh => eh.OffDayTypeID == 1).Count()
                </div>
                <div class="col-2">
                    @Model.Where(eh => eh.OffDayTypeID == 2).Count()
                </div>
                <div class="col-5 text-right pr-5">
                    @Model.Select(eh => eh.TotalHours).Aggregate(TimeSpan.Zero, (t1, t2) => t1 + t2).ToString(@"hh\:mm")
                </div>
            </div>

        </div>
    </div>
</div>