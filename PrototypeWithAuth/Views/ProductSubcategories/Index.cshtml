@model IEnumerable<PrototypeWithAuth.Models.ProductSubcategory>
@using PrototypeWithAuth.AppData

@{

    ViewData["Title"] = "Index";
    var pagetype = TempData[AppUtility.TempDataTypes.PageType.ToString()];
    if (Model.FirstOrDefault().ParentCategory.CategoryTypeID == 1)
    {
        Layout = "~/Views/Shared/RequestNavView.cshtml";
    }
    else if (Model.FirstOrDefault().ParentCategory.CategoryTypeID == 2)
    {
        Layout = "~/Views/Shared/OperationsNavView.cshtml";
    }

}

@*<<<<<<<<<<<< This is the Types page divs >>>>>>>>>>>>>>>*@

@*<table class="table">
    <tbody>*@

@*<div class="d-flex">
        <div>

        </div>
    </div>*@

<div class="text-center">
    <div class="d-flex">

        @{ var firstRow = true;
            var first = true;}
        @for (int i = 0; i < Model.Count(); i++)
        {

            if (i > 0 && i % 8 == 0 )
            {
                first = true;
            @:</div><div class="d-flex mt-5">
            }
            else if (firstRow)
            {
                first = true;
                firstRow = false;
            }
            else
            {
                first = false;
            }
            var marginClass = "";
            if (first)
            {
                marginClass = " mr-3";
            }
            else
            {
                marginClass = " mx-2";
            }
            <div class="@marginClass" style="width:11.5%;">
                <fieldset class="border rounded-large py-4">
                    @*@Html.ActionLink(Model.ElementAt(i).ProductSubcategoryDescription, "Index", "Requests", new { @subcategoryID = @Model.ElementAt(i).ProductSubcategoryID, @PageType = pagetype }, null)*@
                    @if (Model.FirstOrDefault().ParentCategory.CategoryTypeID == 1)
                    {
                        <a href="@Url.ActionLink("Index", "Requests", new { @subcategoryID = @Model.ElementAt(i).ProductSubcategoryID, @PageType = pagetype }, null)">
                            @if (Model.ElementAt(i).ImageURL != null)
                            {
                                <img class="rounded-sm mb-2" style="height:100px" src="@Model.ElementAt(i).ImageURL" alt="Type Bottle" />
                            }
                            else
                            {

                                <img class="rounded-sm mb-2" style="height:100px" src="~/images/css/inventory/Type/bottleBig.png" alt="Type Bottle" />
                            }
                            <br />@Model.ElementAt(i).ProductSubcategoryDescription
                        </a>
                    }
                    else if (Model.FirstOrDefault().ParentCategory.CategoryTypeID == 2)
                    {
                        <a href="@Url.ActionLink("Index", "Operations", new { @subcategoryID = @Model.ElementAt(i).ProductSubcategoryID, @PageType = pagetype }, null)">
                            @if (Model.ElementAt(i).ImageURL != null)
                            {
                                <img class="rounded-sm mb-2" style="height:100px" src="@Model.ElementAt(i).ImageURL" alt="Type Bottle" />
                            }
                            else
                            {

                                <img class="rounded-sm mb-2" style="height:100px" src="~/images/css/inventory/Type/bottleBig.png" alt="Type Bottle" />
                            }
                            <br />@Model.ElementAt(i).ProductSubcategoryDescription
                        </a>
                    }

                </fieldset>
            </div>
        }


    </div>
</div>
